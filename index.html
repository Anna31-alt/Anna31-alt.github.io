<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secured Student Management & Grading System</title>
    <style>
        /* --- General Styles --- */
        body { font-family: Arial, sans-serif; margin: 0; background-color: #f4f4f9; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding-top: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); width: 100%; margin-bottom: 20px; }
        h1 { text-align: center; color: #333; }
        
        /* --- Form/List Section Styles (for Management System) --- */
        .form-section, .list-section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 6px; }
        .form-section h2, .list-section h2 { margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 5px; color: #007bff; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input[type="text"], input[type="number"], input[type="password"] { width: calc(100% - 22px); padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px; margin-right: 5px; }
        button:hover { background-color: #218838; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; }
        .grade-f { color: red; font-weight: bold; }
        .grade-a { color: green; font-weight: bold; }

        /* --- Login Specific Styles --- */
        #login-container {
            width: 350px;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        .input-group { margin-bottom: 15px; text-align: left; }
        #login-btn { background-color: #007bff; }
        #login-btn:hover { background-color: #0056b3; }
        #logout-btn { background-color: #dc3545; }
        #logout-btn:hover { background-color: #c82333; }
    </style>
</head>
<body>

<div id="login-container">
    <h2>Student System Login üîí</h2>
    <div class="input-group">
        <label for="username">Username (Hint: admin)</label>
        <input type="text" id="username" name="username" required>
    </div>
    <div class="input-group">
        <label for="password">Password (Hint: 1234)</label>
        <input type="password" id="password" name="password" required>
    </div>
    <button id="login-btn" onclick="handleLogin()">Log In</button>
    <p id="login-message" style="margin-top: 15px;"></p>
</div>

<div class="container" id="management-system" style="display: none;">
    <h1>üìù Student Management & Grading System</h1>
    <p>*(Data is stored temporarily in your browser using JavaScript OOP)*</p>
    <button id="logout-btn" onclick="handleLogout()">Logout</button>
    
    <hr>

    <div class="form-section">
        <h2>üßë‚Äçüéì Add/Update Student (CRUD)</h2>
        <label for="sName">Name:</label>
        <input type="text" id="sName" placeholder="Enter student name">
        <label for="sAge">Age:</label>
        <input type="number" id="sAge" placeholder="Enter age">
        <label for="sID">ID (for lookup/update):</label>
        <input type="text" id="sID" placeholder="Enter unique ID (e.g., S1001)">
        <button onclick="addStudent()">Add/Update Student</button>
        <button onclick="deleteStudent()">Delete Student</button>
    </div>

    <div class="form-section">
        <h2>üìà Add Test Score</h2>
        <label for="gID">Student ID:</label>
        <input type="text" id="gID" placeholder="Enter student ID to add grade">
        <label for="gTest">Test Name:</label>
        <input type="text" id="gTest" placeholder="e.g., Midterm, Project">
        <label for="gScore">Score (0-100):</label>
        <input type="number" id="gScore" placeholder="Enter score">
        <button onclick="addGrade()">Add Score</button>
    </div>

    <div class="list-section">
        <h2>üìä Student List</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Average</th>
                    <th>Letter Grade</th>
                    <th>Grades</th>
                </tr>
            </thead>
            <tbody id="studentTableBody">
                </tbody>
        </table>
    </div>
</div>

<script>
    // Hardcoded credentials for the frontend demo
    const VALID_USERNAME = 'admin';
    const VALID_PASSWORD = '1234';

    // ------------------------------------
    // LOGIN/LOGOUT LOGIC
    // ------------------------------------

    function handleLogin() {
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        const message = document.getElementById('login-message');
        
        // Check hardcoded credentials
        if (user === VALID_USERNAME && pass === VALID_PASSWORD) {
            message.textContent = 'Login successful!';
            message.style.color = 'green';
            
            // Hide login and show management system
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('management-system').style.display = 'block';
            
            // Initialize data and render the student list
            initializeData();
        } else {
            message.textContent = 'Invalid username or password.';
            message.style.color = 'red';
        }
    }

    function handleLogout() {
        // Clear inputs (optional)
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
        document.getElementById('login-message').textContent = '';
        
        // Hide management system and show login
        document.getElementById('management-system').style.display = 'none';
        document.getElementById('login-container').style.display = 'block';
    }


    // ------------------------------------
    // JAVASCRIPT OOP IMPLEMENTATION (from previous example)
    // ------------------------------------

    class Grade {
        constructor(testName, score) {
            this.testName = testName;
            this.score = parseFloat(score);
        }
    }

    class Student {
        constructor(name, age, id) {
            this.name = name;
            this.age = parseInt(age);
            this.studentID = id;
            this.grades = [];
        }

        addGrade(testName, score) {
            this.grades.push(new Grade(testName, score));
        }

        calculateAverage() {
            if (this.grades.length === 0) return 0;
            const sum = this.grades.reduce((total, grade) => total + grade.score, 0);
            return sum / this.grades.length;
        }

        getLetterGrade() {
            const avg = this.calculateAverage();
            if (avg >= 90) return 'A';
            if (avg >= 80) return 'B';
            if (avg >= 70) return 'C';
            if (avg >= 60) return 'D';
            return 'F';
        }
        
        getGradeDetails() {
            return this.grades.map(g => `${g.testName}: ${g.score}`).join(' | ');
        }
    }

    const studentDatabase = new Map();

    // ------------------------------------
    // CORE APPLICATION LOGIC (CRUD)
    // ------------------------------------

    function addStudent() {
        const id = document.getElementById('sID').value.trim();
        const name = document.getElementById('sName').value.trim();
        const age = document.getElementById('sAge').value;

        if (!id || !name || !age) {
            alert("Please fill in all student fields.");
            return;
        }
        
        if (studentDatabase.has(id)) {
            const student = studentDatabase.get(id);
            student.name = name;
            student.age = parseInt(age);
            alert(`Student ID ${id} updated successfully.`);
        } else {
            const newStudent = new Student(name, age, id);
            studentDatabase.set(id, newStudent);
            alert(`Student ${name} added successfully.`);
        }

        document.getElementById('sName').value = '';
        document.getElementById('sAge').value = '';
        document.getElementById('sID').value = '';
        renderStudents();
    }

    function deleteStudent() {
        const id = document.getElementById('sID').value.trim();
        if (!id) {
            alert("Please enter the Student ID to delete.");
            return;
        }

        if (studentDatabase.delete(id)) {
            alert(`Student ID ${id} deleted successfully.`);
        } else {
            alert(`Error: Student ID ${id} not found.`);
        }
        renderStudents();
    }

    function addGrade() {
        const id = document.getElementById('gID').value.trim();
        const testName = document.getElementById('gTest').value.trim();
        const score = document.getElementById('gScore').value;

        if (!id || !testName || score === '') {
            alert("Please fill in all grade fields.");
            return;
        }

        const student = studentDatabase.get(id);
        if (!student) {
            alert(`Error: Student ID ${id} not found.`);
            return;
        }

        student.addGrade(testName, score);
        alert(`Score added for ${student.name}.`);

        document.getElementById('gID').value = '';
        document.getElementById('gTest').value = '';
        document.getElementById('gScore').value = '';
        renderStudents();
    }

    function renderStudents() {
        const tbody = document.getElementById('studentTableBody');
        tbody.innerHTML = '';

        studentDatabase.forEach(student => {
            const avg = student.calculateAverage().toFixed(2);
            const letter = student.getLetterGrade();
            const row = tbody.insertRow();
            
            const gradeClass = (letter === 'F') ? 'grade-f' : (letter === 'A' ? 'grade-a' : '');

            row.insertCell().textContent = student.studentID;
            row.insertCell().textContent = student.name;
            row.insertCell().textContent = student.age;
            row.insertCell().textContent = avg;
            
            const gradeCell = row.insertCell();
            gradeCell.textContent = letter;
            gradeCell.className = gradeClass;
            
            row.insertCell().textContent = student.getGradeDetails();
        });
    }

    function initializeData() {
        // Clear previous data if any, then add samples
        studentDatabase.clear();
        const s1 = new Student("Alice Johnson", 20, "S1001");
        s1.addGrade("Midterm", 85.5);
        s1.addGrade("Final", 92.0);
        studentDatabase.set(s1.studentID, s1);

        const s2 = new Student("Bob Smith", 21, "S1002");
        s2.addGrade("Quiz", 65.0);
        s2.addGrade("Project", 70.0);
        studentDatabase.set(s2.studentID, s2);
        
        renderStudents();
    }

</script>

</body>
</html>
